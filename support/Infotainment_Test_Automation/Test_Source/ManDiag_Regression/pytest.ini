# =====================================================================================================
#  pytest.ini  â†’ Central Pytest Configuration
#  Author:     Srinivasa V (Seenu)
#  Description:
#      - Common pytest configuration for all test groups (Main HW + Experimental EXP)
#      - Defines test discovery rules, global HTML reporting options, and marker groups.
#      - Used by both actual framework tests and EXP learning tests.
# =====================================================================================================

[pytest]
# -----------------------------------------------------------------------------------------------------
# Global Settings
# -----------------------------------------------------------------------------------------------------
# Ignore PyVISA or 3rd-party deprecation warnings
filterwarnings =
    ignore:.*py.*module.*is.*deprecated.*

# Command-line options (applied automatically)
# --self-contained-html: embeds CSS and JS in one HTML file
# --html=out/reports/latest_test_report.html: unified report for all runs
# -v : verbose mode
addopts =
    --self-contained-html
    --html=out/reports/latest_test_report.html
    -p no:sugar
    -cache-clear
    --no-header --no-summary
    -s
# -----------------------------------------------------------------------------------------------------
# Marker Definitions
# -----------------------------------------------------------------------------------------------------
# Register all valid markers here to prevent "PytestUnknownMarkWarning"
markers =
    # MIB4 Project Tests marker registration
    mib4_regression_test: Marks tests belonging to the MIB4 project test suite
        mib4_System_0x0001   : system group enter mandiag session feature tests
        mib4_System_0x0002   : system group Terminal filter feature tests
        mib4_System_0x0003   : system group Watchdog feature tests
        mib4_System_0x0004   : system group Death mode feature tests
        mib4_System_0x0006   : system group Reset counter feature tests

        mib4_Power_0x0A01    : power group Radio ON/OFF feature tests
        mib4_Power_0x0A02    : power group IGN CL15 ON/OFF feature tests
        mib4_Power_0x0A03    : power group CLS ON/OFF feature tests
        mib4_Power_0x0A04    : power group Sleep mode feature tests
        mib4_Power_0x0A05    : power group Unit restart feature tests
        mib4_Power_0x0A06    : power group Battery Calibration feature tests
        mib4_Power_0x0A08    : power group Battery Voltage CL30 ON/OFF feature tests
        mib4_Power_0x0A09    : power group Phantom AM ON/OFF feature tests
        mib4_Power_0x0A0A    : power group Phantom FM ON/OFF feature tests
        mib4_Power_0x0A0B    : power group Phantom DAB ON/OFF feature tests
        mib4_Power_0x0A10    : power group Phantom A2B MIC ON/OFF feature tests
        mib4_Power_0x0A11    : power group Phantom A2B BOOST ON/OFF feature tests
        mib4_Power_0x0A14    : power group Phantom USB ON/OFF feature tests

    # HPCC Project Tests marker registration
    hpcc: Marks tests belonging to the HPCC project test suite
        hpcc_mpi : read mpi data and export to excel
        hpcc_tcu : execute Telematics test suite

    # IHP Project Tests marker registration
    ihp: Marks tests belonging to the HPCC project test suite
        ihp_xx : execute xx test suite
        ihp_yy : execute yy test suite

    # SEM2.5 Project Tests marker registration
    sem25 : Marks tests belonging to the HPCC project test suite
        sem25_xx : execute xx test suite
        sem25_yy : execute yy test suite

    # Experimental Learning Group
    session: Marks tests related to session-level execution
    math: Mathematical operation related EXP tests
    logic: Logical operation related EXP tests
    classdemo: Class-based test examples
    fixture: Fixture and parameterization demonstration tests
    exp: Experimental tests (no HW dependency) for pytest learning and demos

# -----------------------------------------------------------------------------------------------------
# Log and Report Directories (relative paths)
# -----------------------------------------------------------------------------------------------------
# All logs & reports generated under /out for clean organization
log_file = out/logs/pytest_execution.log
log_file_level = INFO
log_file_format = [%(asctime)s] %(levelname)s :: %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# =====================================================================================================
# End of pytest.ini
# =====================================================================================================
